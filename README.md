# 操作文档
## 一、部署
### 1.1 安装数据库 mysql 5.7 +
> https://www.cnblogs.com/secretmrj/p/15600144.html
### 1.2 安装 JDK 17
> https://www.cnblogs.com/binz/p/17268441.html
### 1.3 执行 `sql` 脚本
> 见`sql` 文件夹


## 二、配置教程

### 2.1 新建机器人（客服机器人和群管机器人）

> 1. 找 `@BotFather` 申请机器人
> 2. 拿到 token
> 3. 关闭机器人 `Group Privacy`
>    1.  输入：`mybots`
>    2. 找到机器人，点击进去
>    3. 找到 `Bot Settings`
>    4. 点击：`Group Privacy`
>    5. 点击：`turn off`
### 2.2 新建后台群
略，将机器人拉入群内，给上权限

### 2.3 新建客服群

注意：必须开启话题功能

必须的权限：修改群组信息，话题功能

### 2.4 后台群内配置机器人
- 设置键盘

> 设置#键盘#按钮1,按钮2,按钮3\n按钮4,按钮5,按钮6



- **设置欢迎语（必须配置）**

> **固定格式：**  设置#欢迎语#你好你好！！！✅
>
> **动态格式：**  设置#欢迎语#%username%你好你好！！！✅



- **设置客服群（必须配置）**

> 设置#客服群#-1002150462985 

- 服务结束语



> 设置#结束语#本次服务已经结束，欢迎下次光临



- 设置话题组名称

> **系统默认：** 客户 | %nickname% | %userId% | 新对话
>
> **固定格式：** 设置#话题#新话题
>
> **动态格式：** 设置#话题#新话题 | %nickname% | %userId% | %username%



- 设置消息头

> 设置#消息头#🔥10086人工客服

- 设置消息尾巴

> 设置#小尾巴#技术支持来自`[@developrobots](https://t.me/developrobots)`
>
> **解释：** [ ]  中括号内是展示的内容  ( ) 小括号内是点击后跳转的网址



- 设置被封号的用户发送消息给机器人后回复的消息内容

> 设置#封号#❌抱歉，您已被封号



- 刷新命令

> **解释：** 如果你执行了上面的命令发现并没有生效，可以执行刷新命令
>
> **命令：** flush



- 话题复用

> 命令：设置#话题复用#开启             设置#话题复用#关闭
>
> 解释：当客服服务完毕后，下一次用户继续咨询是否沿用之前的话题，如果开启则沿用旧的话题，如果关闭则打开新的话题



- 关键词

> 添加命令：关键词添加#关键词#内容
>
> 删除命令：关键词删除#关键词
>
> 用法：配合按钮进行使用，点击按钮自动发送按钮内容，机器人收到按钮内容后，自动回复



### 2.5 话题组内命令

- 结束服务

> 命令：结束服务  或者  终止服务  或者  服务结束
>
> **解释：** 结束服务后，机器人会自动发送 **2.4 中 (服务结束语)** 到用户，如果不配置则不会收到任何消息



- 封号/解封

> 命令：封禁用户 / 解封用户
>
> **解释：** 用户被封后，用户私聊机器人会收到 **2.4 中 (被封号的用户发送消息给机器人后回复的消息内容)** 配置的消息，如果没有配置，则不会收到任何消息



## 三、用法

### 3.1 用户发送 /start 命令

用户发送 /start 命令后，新用户则创建新话题，旧用户则根据配置项 **话题复用** 进行选择话题是否新建



### 3.2 用户发送媒体

任何媒体都能转发到客服群的话题内



### 3.3 客服发送媒体

任何媒体都能转发到用户



## 四、联系作者

[@developrobots](https://t.me/developrobots)





